CREATE TABLE artists (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, name TEXT(255));
CREATE TABLE albums (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, name TEXT(255), artist_id INT REFERENCES artists);
INSERT INTO artists (name) VALUES ('Ar');
INSERT INTO albums (name, artist_id) VALUES ('Al', 1);
SELECT artists.* FROM artists INNER JOIN artists AS "b" ON (b.id = artists.id) WHERE (artists.id IN (SELECT albums.artist_id FROM albums WHERE ((name = 'Al') AND (NOT albums.artist_id IS NULL) AND (albums.id IN (SELECT id FROM (SELECT albums.id, ROW_NUMBER() OVER (PARTITION BY albums.artist_id ORDER BY name) AS "x" FROM albums WHERE (name = 'Al')) AS "t1" WHERE (x = 1))) AND (albums.id IN (1, 2)))));
